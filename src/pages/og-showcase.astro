---
import Layout from '../layouts/Layout.astro';
import { OG_TEMPLATES } from '../utils/og-generator';

const title = 'OG Image Showcase';
const description = 'Explore all the amazing OG image templates available on this site';

// Sample data for demonstrations
const samplePost = {
  title: 'Building Modern Web Applications with React and TypeScript',
  description: 'Learn how to create scalable, maintainable web applications using React, TypeScript, and modern development practices.',
  tags: ['React', 'TypeScript', 'Web Development', 'Frontend'],
  date: new Date('2024-01-15'),
  readingTime: '8',
};

const sampleTalk = {
  title: 'The Future of Web Development',
  description: 'A deep dive into emerging technologies and trends shaping the future of web development.',
  eventName: 'TechConf 2024',
  tags: ['Web Dev', 'Technology', 'Future'],
  date: new Date('2024-01-10'),
};

const sampleProject = {
  title: 'React Developer Portfolio',
  description: 'A modern, responsive portfolio website built with React, TypeScript, and Tailwind CSS.',
  tags: ['React', 'Portfolio', 'Design', 'Open Source'],
};

const baseUrl = Astro.site?.toString() || 'https://piyushmehta.com';
---

<Layout title={title} description={description}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">
        OG Image Showcase
      </h1>
      <p class="text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
        Explore all the amazing OG image templates available on this site. Each template is optimized for different content types and social media platforms.
      </p>
    </div>

    <!-- Template Gallery -->
    <div class="space-y-16">
      {Object.entries(OG_TEMPLATES).map(([templateKey, template]) => (
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
          <div class="p-8">
            <div class="flex items-center justify-between mb-6">
              <div>
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white">
                  {template.name}
                </h2>
                <p class="text-gray-600 dark:text-gray-300 mt-1">
                  {template.description}
                </p>
              </div>
              <div class="text-right">
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  Best for: {template.bestFor.join(', ')}
                </div>
                <div class="text-xs text-gray-400 dark:text-gray-500 mt-1">
                  Features: {template.features.join(', ')}
                </div>
              </div>
            </div>

            <!-- Sample Images Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
              
              <!-- Blog Post Example -->
              <div class="space-y-3">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                  Blog Post
                </h3>
                <div class="bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden">
                  <img 
                    src={`${baseUrl}/api/og-enhanced?title=${encodeURIComponent(samplePost.title)}&description=${encodeURIComponent(samplePost.description)}&type=article&template=${templateKey}&date=${samplePost.date.toISOString()}&tags=${samplePost.tags.join(',')}&readingTime=${samplePost.readingTime}`}
                    alt={`${template.name} - Blog Post Example`}
                    class="w-full h-auto"
                    loading="lazy"
                  />
                </div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  Article with reading time and tags
                </div>
              </div>

              <!-- Talk/Presentation Example -->
              <div class="space-y-3">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                  Talk/Presentation
                </h3>
                <div class="bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden">
                  <img 
                    src={`${baseUrl}/api/og-enhanced?title=${encodeURIComponent(sampleTalk.title)}&description=${encodeURIComponent(sampleTalk.description)}&type=website&template=${templateKey}&tags=${sampleTalk.tags.join(',')}&date=${sampleTalk.date.toISOString()}`}
                    alt={`${template.name} - Talk Example`}
                    class="w-full h-auto"
                    loading="lazy"
                  />
                </div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  Tech talk or presentation with event info
                </div>
              </div>

              <!-- Project Example -->
              <div class="space-y-3">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                  Project
                </h3>
                <div class="bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden">
                  <img 
                    src={`${baseUrl}/api/og-enhanced?title=${encodeURIComponent(sampleProject.title)}&description=${encodeURIComponent(sampleProject.description)}&type=project&template=${templateKey}&tags=${sampleProject.tags.join(',')}`}
                    alt={`${template.name} - Project Example`}
                    class="w-full h-auto"
                    loading="lazy"
                  />
                </div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  Project showcase with tech stack
                </div>
              </div>

            </div>

            <!-- Theme Variants -->
            <div class="mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
                Theme Variations
              </h3>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                {['dark', 'light', 'auto'].map(theme => (
                  <div class="space-y-2">
                    <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 capitalize">
                      {theme} Theme
                    </h4>
                    <div class="bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden">
                      <img 
                        src={`${baseUrl}/api/og-enhanced?title=${encodeURIComponent('Theme Variation Example')}&description=${encodeURIComponent('This shows how the template looks in different themes')}&template=${templateKey}&theme=${theme}&showLogo=true&showBadge=true`}
                        alt={`${template.name} - ${theme} theme`}
                        class="w-full h-auto"
                        loading="lazy"
                      />
                    </div>
                  </div>
                ))}
              </div>
            </div>

            <!-- API Usage -->
            <div class="mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
                API Usage
              </h3>
              <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto">
                <pre class="text-sm text-gray-100">
                  <code>{`// Generate OG image URL
const ogImageUrl = \`${baseUrl}/api/og-enhanced?title=\${encodeURIComponent(title)}&template=${templateKey}&theme=dark\`;

// With full parameters
const fullOgImageUrl = \`${baseUrl}/api/og-enhanced?title=\${encodeURIComponent(title)}&description=\${encodeURIComponent(description)}&type=article&template=${templateKey}&theme=dark&tags=\${tags.join(',')}&showLogo=true&showBadge=true\`;`}</code>
                </pre>
              </div>
            </div>

          </div>
        </div>
      ))}
    </div>

    <!-- Integration Examples -->
    <div class="mt-16 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 rounded-xl p-8">
      <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6 text-center">
        Integration Examples
      </h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6">
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
            Astro Integration
          </h3>
          <pre class="text-sm bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
            <code>{`---
import { generateOGImageMetadata } from '../utils/og-generator';

const ogImage = generateOGImageMetadata({
  title: 'My Blog Post',
  description: 'An amazing blog post',
  type: 'article',
  template: 'blog',
  tags: ['javascript', 'web-dev']
});
---

<meta property="og:image" content={ogImage.url} />
<meta property="og:image:width" content={ogImage.width} />
<meta property="og:image:height" content={ogImage.height} />`}</code>
          </pre>
        </div>

        <div class="bg-white dark:bg-gray-800 rounded-lg p-6">
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
            Dynamic Template Selection
          </h3>
          <pre class="text-sm bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
            <code>{`import { getRecommendedTemplate } from '../utils/og-generator';

// AI-powered template selection
const template = getRecommendedTemplate('article', ['programming', 'react']);

// Generate optimized OG image
const ogImage = generateOGImageMetadata({
  title: post.title,
  description: post.excerpt,
  type: 'article',
  template,
  tags: post.tags
});

// For talks/presentations
const talkImage = generateTalkOGImage({
  title: 'My Conference Talk',
  description: 'Building the future of web development',
  eventName: 'TechConf 2024',
  tags: ['React', 'Performance']
});`}</code>
          </pre>
        </div>
      </div>
    </div>

    <!-- Performance Notes -->
    <div class="mt-12 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-6">
      <h3 class="text-lg font-semibold text-amber-800 dark:text-amber-200 mb-2">
        Performance & Caching
      </h3>
      <ul class="text-amber-700 dark:text-amber-300 space-y-1">
        <li>• Images are cached with a 1-year TTL for optimal performance</li>
        <li>• Generated images are served from Vercel's edge network</li>
        <li>• Template rendering is optimized with React.createElement for speed</li>
        <li>• Multiple themes and templates can be generated without additional overhead</li>
      </ul>
    </div>

  </div>
</Layout>

<style>
  pre {
    font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
  }
</style>